---
# Ansible playbook that deploys applications on Kubernetes after cluster creation

- hosts: all
  gather_facts: true
  tasks: []

- hosts: 127.0.0.1
  gather_facts: false
  connection: local
  become: false
  roles:
    - role: applications
      when:
        - groups.applications is defined
        - groups.applications | length > 0
  environment:
    KUBECONFIG: "{{ vault_location }}/../kubeconfig"  # "inventory_dir" cannot be used here
