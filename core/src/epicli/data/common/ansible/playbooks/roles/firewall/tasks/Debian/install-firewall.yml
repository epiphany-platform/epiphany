---
- name: Get service facts
  service_facts:

- name: Stop ufw service
  systemd:
    name: ufw
    state: stopped
    enabled: no
  when: ansible_facts.services['ufw'] is defined

- name: Remove ufw package
  apt:
    name: ufw
    state: absent
    purge: yes

# TODO: Temporary hotfix - do not install firewalld, since on Ubuntu it automatically starts firewalld service
# - name: Install firewalld package
#   package:
#     name: firewalld
#     state: present