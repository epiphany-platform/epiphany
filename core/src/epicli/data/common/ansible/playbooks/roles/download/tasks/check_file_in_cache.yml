---
- name: check_file_in_cache | Get file status
  stat:
    path: "{{ file_arg.cached_file_path }}"
    get_checksum: yes
    checksum_algorithm: "{{ file_arg.checksum_algorithm }}"
  register: check_file_in_cache
  changed_when: false
  delegate_facts: no
  delegate_to: localhost
  become: false

- name: check_file_in_cache | Set fact based on previous task
  set_fact:
    is_file_in_cache: >-
      {{ check_file_in_cache.stat.exists
         and check_file_in_cache.stat.checksum == file_arg[file_arg.checksum_algorithm] }}