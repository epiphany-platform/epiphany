---
- set_fact:
    master_present: False

- name: Check if we have K8s master(s)
  set_fact:
    master_present: True
  when:
    - groups.kubernetes_master | default([]) | length >= 0

- name: Get first K8s master IP
  set_fact:
    master_ip: >-
      {{hostvars[groups.kubernetes_master[0]].ansible_host}}
  when:
    - master_present