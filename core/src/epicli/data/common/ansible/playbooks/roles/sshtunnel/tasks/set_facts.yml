---
- name: Set fact about existence of K8s master in inventory
  set_fact:
    k8s_master_present: "{{ groups.kubernetes_master | default([]) | length > 0 }}"

- name: Set IP of first K8s master (from inventory)
  set_fact:
    k8s_master_ip: >-
      {{ hostvars[groups.kubernetes_master[0]].ansible_host }}
  when:
    - k8s_master_present