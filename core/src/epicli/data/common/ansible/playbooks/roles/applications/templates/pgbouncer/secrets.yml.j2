---
apiVersion: v1
kind: Secret
metadata:
  name: pgbouncer
  labels:
    app: pgbouncer
  namespace: {{ data.namespace }}
type: Opaque
data:
  admin_users: "{{ data.pgbouncer.secrets.admin_users | b64encode }}"
---
#Create users file to store database credentials
#Expected format is:
#"username" "md5password"
apiVersion: v1
kind: Secret
metadata:
  name: pgbouncer-users-file
  labels:
    app: pgbouncer
  namespace: {{ data.namespace }}
type: Opaque
data:
  users: "{{ [data.pgbouncer.secrets.db_user, data.pgbouncer.secrets.db_password] | join(' ') | b64encode }}"
