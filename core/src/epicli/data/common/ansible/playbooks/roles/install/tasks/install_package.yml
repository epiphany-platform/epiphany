---
# Expects package yaml object from dependencies named package_definition

- name: Download {{ package_definition.id }} v{{ package_definition.version }}
  include_role:
    name: download
    tasks_from: download_package
  vars:
    package_arg: "{{ package_definition }}"

- name: Install {{ package_definition.id }} {{ ansible_os_family }} package from {{ file.dest_path }}
  apt:
    deb: "{{ file.dest_path }}"
    state: present
  when: ansible_os_family == "Debian"

- name: Install {{ package_definition.id }} {{ ansible_os_family }} package from {{ file.dest_path }}
  yum:
    name: "{{ file.dest_path }}"
    state: present
  when: ansible_os_family == "RedHat"