---
# Docker (used by master & worker as dependency)

- name: Install Docker for Debian family
  package:
    name: "{{ item }}"
    state: present
  loop:
    - apt-transport-https
    - ca-certificates
    - containerd.io
    - docker-ce-cli={{ docker_cli_version }}
    - docker-ce={{ docker_version }}
  when: ansible_os_family == "Debian"

- name: Install Docker for RedHat family
  package:
    name: "{{ item }}"
    state: present
  loop:
      - docker-ce-cli-{{ docker_cli_version_rh }}
      - docker-ce-{{ docker_version_rh }}
  when: ansible_os_family == "RedHat"

- include_tasks: configure-docker.yml
