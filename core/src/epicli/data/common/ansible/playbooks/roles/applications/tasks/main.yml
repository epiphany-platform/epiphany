---
- name: Wait until cluster is available
  include_tasks: wait-for-cluster.yml

- name: Include applications
  include_tasks: applications/{{ data.name }}/main.yml
  no_log: true  # to hide sensitive data
  loop: "{{ specification.applications }}"
  loop_control:
    loop_var: data
  when:
    - specification.applications is defined
    - specification.applications | length > 0
    - data.enabled | default(true)
