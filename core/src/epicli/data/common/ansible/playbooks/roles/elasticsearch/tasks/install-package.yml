---

- name: Download {{ package_name }} for ElasticSearch v{{ specification.elasticsearch_version }}
  include_role:
    name: download
    tasks_from: download_package
  vars:
    package_arg: "{{ dependencies.elasticsearch[specification.elasticsearch_version].packages | selectattr('id', 'equalto', package_name) | list | first }}"

- name: Install {{ package_name }} from {{ file.dest_path }}
  package:
    name: "{{ file.dest_path }}"
    state: present