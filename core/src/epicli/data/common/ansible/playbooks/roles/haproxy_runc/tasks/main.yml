---
- name: Assert input parameters
  assert:
    that:
      - haproxy_service is defined

- name: Install required system packages
  include_tasks: "install-packages-{{ ansible_os_family }}.yml"

- name: Setup runc container
  include_tasks: setup-runc-container.yml

- name: Setup systemd unit
  include_tasks: setup-systemd-unit.yml

- name: Enable and start {{ haproxy_service }} service
  systemd:
    name: "{{ haproxy_service }}"
    state: started
    enabled: true
    daemon_reload: true
