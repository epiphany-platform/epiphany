---
- name: Create directory for files
  file:
    path: "{{ configuration_temp_directory }}/"
    state: directory

- name: Upload {{ file_name }} file
  template:
    dest: "{{ configuration_temp_directory }}/{{ file_name }}"
    src: ignite-stateless/{{ file_name }}.j2
    mode: u=rw,go=r

- name: Apply {{ file_name }} file
  command: kubectl apply -f {{ configuration_temp_directory }}/{{ file_name }}
