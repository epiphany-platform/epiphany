kind: configuration/kubernetes-master
version: 0.4.1
title: "Kubernetes Master Config"
name: default
specification:
  version: 1.14.6
  images_to_load:
  - name: "k8s.gcr.io/kube-apiserver:v1.14.6"
    file_name: kube-apiserver-v1.14.6.tar
  - name: "k8s.gcr.io/kube-controller-manager:v1.14.6"
    file_name: kube-controller-manager-v1.14.6.tar
  - name: "k8s.gcr.io/kube-scheduler:v1.14.6"
    file_name: kube-scheduler-v1.14.6.tar
  - name: "k8s.gcr.io/kube-proxy:v1.14.6"
    file_name: kube-proxy-v1.14.6.tar
  - name: "k8s.gcr.io/pause:3.1"
    file_name: pause-3.1.tar
  - name: "k8s.gcr.io/etcd:3.3.10"
    file_name: etcd-3.3.10.tar
  - name: "k8s.gcr.io/coredns:1.3.1"
    file_name: coredns-1.3.1.tar
  - name: "coredns/coredns:1.5.0"
    file_name: coredns-1.5.0.tar
  - name: "quay.io/coreos/flannel:v0.11.0-amd64"
    file_name: flannel-v0.11.0-amd64.tar
  - name: "quay.io/coreos/flannel:v0.11.0"
    file_name: flannel-v0.11.0.tar
  - name: "calico/node:v3.8.1"
    file_name: node-v3.8.1.tar
  - name: "calico/pod2daemon-flexvol:v3.8.1"
    file_name: pod2daemon-flexvol-v3.8.1.tar
  - name: "kubernetesui/dashboard:v2.0.0-beta1"
    file_name: dashboard-v2.0.0-beta1.tar
  - name: "kubernetesui/metrics-scraper:v1.0.0"
    file_name: metrics-scraper-v1.0.0.tar
  - name: "calico/cni:v3.8.1"
    file_name: cni-v3.8.1.tar
  - name: "calico/kube-controllers:v3.8.1"
    file_name: kube-controllers-v3.8.1.tar
  - name: "jboss/keycloak:4.8.3.Final"
    file_name: keycloak-4.8.3.Final.tar
  - name: "rabbitmq:3.7.10"
    file_name: rabbitmq-3.7.10.tar

  allow_pods_on_master: False
  storage:
    name: epiphany-cluster-volume # name of the Kubernetes resource
    path: / # directory path in mounted storage
    enable: True
    capacity: 50 # GB
    data: {} #AUTOMATED - data specific to cloud provider
  advanced: # modify only if you are sure what value means
    api_server_args: # https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/
      profiling: false
      enable-admission-plugins: "AlwaysPullImages,DenyEscalatingExec,NamespaceLifecycle,ServiceAccount,NodeRestriction"
      audit-log-path: "/var/log/apiserver/audit.log"
      audit-log-maxbackup: 10
      audit-log-maxsize: 200
    controller_manager_args: # https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/
      profiling: false
      terminated-pod-gc-threshold: 200
    scheduler_args:  # https://kubernetes.io/docs/reference/command-line-tools-reference/kube-scheduler/
      profiling: false
    networking:
      dnsDomain: cluster.local
      podSubnet: 10.244.0.0/16
      serviceSubnet: 10.96.0.0/12
      plugin: flannel # valid options: calico, flannel, canal (due to lack of support for calico on Azure - use canal)
    imageRepository: k8s.gcr.io
    certificatesDir: /etc/kubernetes/pki
    etcd_args:
      encrypted: yes

#  image_registry_secrets:
#  - email: emaul@domain.com
#    name: secretname
#    namespace: default
#    password: docker-registry-pwd
#    server_url: docker-registry-url
#    username: docker-registry-user