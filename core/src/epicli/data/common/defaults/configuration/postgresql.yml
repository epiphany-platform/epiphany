kind: configuration/postgresql
title: PostgreSQL
name: default
specification:
  replication:
    enabled: no
  config_file:
    parameter_groups:
      - name: CONNECTIONS AND AUTHENTICATION
        subgroups:
          - name: Connection Settings
            parameters:
              - name: listen_addresses
                value: "'*'"
                comment: listen on all addresses
      - name: RESOURCE USAGE (except WAL)
        subgroups:
          - name: Kernel Resource Usage
            parameters:
              - name: shared_preload_libraries
                value: SET_BY_AUTOMATION
                comment: set by automation
      - name: ERROR REPORTING AND LOGGING
        subgroups:
          - name: Where to Log
            parameters:
              - name: log_filename
                value: "'postgresql-%Y-%m-%d_%H%M.log'"
  additional_components:
    pgbouncer:
      enabled: no
  extensions:
    pgaudit:
      enabled: false
      shared_preload_libraries:
        - pgaudit
      config_file_parameters:
        ## standard
        log_connections: 'off'
        log_disconnections: 'off'
        log_line_prefix: "'<%m:%r:%u@%d:[%p]:> '"
        log_statement: none
        ## pgaudit specific
        pgaudit.log: "'read, write, function, role, ddl, misc_set'" # same as: 'all, -misc'
        # the following first 3 parameters are set to reduce overhead of logging
        pgaudit.log_catalog: 'off'
        pgaudit.log_relation: 'off' # same as default but explicitly
        pgaudit.log_statement_once: 'on'
        pgaudit.log_parameter: 'off' # same as default but explicitly
